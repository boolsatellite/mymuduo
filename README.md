## muduo库核心代码实现

**nocopyable**

muduo库中为了阻止某些类的拷贝构造和赋值采用了私有继承nocopyable类，nocopyable将拷贝构造和赋值运算符delete掉了，这样有效的阻止了派生类的复制，优于将拷贝构造delete或设为私有方法，这种方法可以清晰的看出一个类是否允许被复制

**__thread 关键字**

```__thread```是GCC内置的线程局部存储设施，存取效率可以和全局变量相比。 ```__thread```变量每一个线程有一份独立实体，各个线程的值互不干扰。可以用来修饰那些带有全局性且值可能变，但是又不值得用全局变量保护的变量。

**__builtin_expect 说明**

这个指令是gcc引入的，作用是**允许程序员将最有可能执行的分支告诉编译器**。这个指令的写法为：`__builtin_expect(EXP, N)`。
意思是：EXP==N的概率很大。

通过这种方式，编译器在编译过程中，会将可能性更大的代码紧跟着起面的代码，从而减少指令跳转带来的性能上的下降。

**获取真实的tid**

```pthread_t pthread_self(void)```返回进程内唯一的线程id并非操作系统层面的线程id

获取真实的```tid```应该使用系统调用

```c++
int tid = static_cast<pid_t>(syscall(SYS_gettid));
```

